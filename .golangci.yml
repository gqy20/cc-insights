# Golangci-lint configuration
# See https://golangci-lint.run/usage/configuration/

run:
  # Timeout for analysis
  timeout: 5m

  # Which dirs to skip
  skip-dirs:
    - vendor

  # Which files to skip
  skip-files:
    - ".*\\.pb\\.go"

  # Go version (use project's Go version)
  go: "1.21"

linters:
  # Disable all linters
  disable-all: true

  # Enable specific linters
  enable:
    # Bugs
    - errcheck      # Check for unchecked errors
    - gosimple      # Simplify code
    - govet         # Vet examines Go source code
    - ineffassign   # Detect ineffectual assignments
    - staticcheck   # Go static analysis
    - typecheck     # Type-check Go code

    # Style
    - gofmt         # Check whether code was gofmt-ed
    - goimports     # Check import statements are formatted
    - misspell      # Find commonly misspelled English words

    # Complexity
    - gocyclo       # Compute cyclomatic complexities
    - gocognit      # Compute cognitive complexities

    # Performance
    - prealloc      # Find slice declarations that could potentially be preallocated

linters-settings:
  gocyclo:
    # Minimal code complexity to report
    min-complexity: 15

  gocognit:
    # Minimal code complexity to report
    min-complexity: 20

  errcheck:
    # Report about not checking of errors in type assertions: `a := b.(MyStruct)`
    check-type-assertions: false

    # Report about assignment of errors to blank identifier: `num, _ := strconv.Atoi(numStr)`
    check-blank: false

issues:
  # Maximum issues count per one linter
  max-issues-per-linter: 0

  # Maximum count of issues with the same text
  max-same-issues: 0

  # Show only new issues
  new: false

  # Exclude specific issues
  exclude-rules:
    # Exclude some linters from running on tests files
    - path: _test\.go
      linters:
        - gocyclo
        - errcheck

output:
  # Format: colored-line-number|line-number|json|tab|checkstyle|code-climate
  format: colored-line-number

  # Print lines of code with issue
  print-issued-lines: true

  # Print linter name in the end of issue text
  print-linter-name: true

  # Make issues output unique by line
  uniq-by-line: true

  # Sort results by: filepath, line and column
  sort-results: true
